<!doctype HTML>
<html>
<head>
</head>
<body>
Loading...
</body>
<script>
//https://www.miraag.net/mg/p/gc_b/gc_b_vday.html?mdl=<id>&c=<checksum>
//https://www.miraag.net/mg/p/gc_b/gc_b_vday.html?mdl=xxxxx&c=xxxxxxxxxxxxxxxxx..
//e.g. https://miraag.net/mg/p/gc_b/gc_b_vday.html?mdl=3&c=demo
//check if checksum is correct - this will be done on .com page so skip here and redirect
//redirect to https://miraag.com/mg/p/gc_b/gc_b_vday.html?mdl=<i>

const baselink = "https://miraag.com/mg/p/gc_b/vday/"
	
const params = (new URL(location)).searchParams; //get query strings	
let mdl = "1"; 
let tar = "3";

window.addEventListener('DOMContentLoaded', function() {
	//set page params
	if(params.has('mdl') && params.has('t')) { 
		mdl = params.get('mdl'); //get mdlcode from query string
		tar = params.get('t'); //get target file identifier from query string
		chksum = "temp"; 
		redirectTo(mdl, tar, chksum);
	}
	else { 
		console.log("mdl and/or t parameter not provided in link");
		alert("Please scan valid qr code"); 
		document.body.innerHTML = "Please scan valid qr code";
	}
});

function redirectTo(mdl, tar, chksum) {
	let htmlfilename = "m" + mdl + "t" + tar;
	let redirectlink = baselink + htmlfilename;
	console.log(redirectlink);
	window.location.replace(redirectlink);
}

</script>
</html>
